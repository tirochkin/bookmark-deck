# Техническое задание: Bookmark Deck

## 1. Общие сведения

### 1.1 Название проекта
Bookmark Deck — менеджер визуальных закладок

### 1.2 Назначение
Одностраничное веб-приложение для организации и быстрого доступа к закладкам в формате сетки, вдохновлённое устройством Stream Deck XL.

### 1.3 Технологический стек
- **Фреймворк:** Vue.js 3 (Composition API)
- **Стилизация:** Tailwind CSS 4
- **Хранение данных:** localStorage
- **Целевая платформа:** десктопные браузеры (Chrome, Firefox, Safari, Edge)

---

## 2. Функциональные требования

### 2.1 Структура интерфейса

#### 2.1.1 Основные элементы
- **Панель табов** — переключение между страницами закладок
- **Сетка закладок** — основная рабочая область 8×4 (32 ячейки)
- **Панель инструментов** — кнопка режима редактирования, настройки
- **Буферная область** — временное хранилище блоков (только в режиме редактирования)
- **Корзина** — хранилище удалённых блоков (только в режиме редактирования)

#### 2.1.2 Сетка закладок
- Фиксированный размер: 8 колонок × 4 строки
- Не адаптируется под размер экрана
- Каждая ячейка — квадратный блок одинакового размера

---

### 2.2 Блок закладки

#### 2.2.1 Данные блока
| Поле | Тип | Обязательное | Описание |
|------|-----|--------------|----------|
| id | string (uuid) | да | Уникальный идентификатор |
| url | string | да | URL ссылки |
| title | string | да | Название для отображения |
| color | string | да | Идентификатор цвета/градиента из предустановленного набора |
| icon | string | нет | Идентификатор иконки (реализация отложена) |
| textAlign | enum | да | Вертикальное выравнивание текста: top, center, bottom |

#### 2.2.2 Визуальное оформление блока
- **Фон:** цвет или градиент из предустановленной палитры
- **Иконка:** векторная, по центру блока (реализация набора отложена)
- **Текст:** название поверх иконки, с настраиваемым вертикальным выравниванием
- **Пустая ячейка:** еле заметная пунктирная рамка

#### 2.2.3 Состояния блока
| Состояние | Визуальный эффект |
|-----------|-------------------|
| Обычное | Базовый вид с цветом/градиентом |
| Hover | Подсветка (свечение в геймерском стиле) |
| Перетаскивание | Визуальное выделение, полупрозрачность |
| Режим редактирования | Индикация возможности редактирования |

#### 2.2.4 Предустановленная палитра цветов
Набор из 12–16 цветов и градиентов в тёмной гамме, подходящих под геймерский стиль:
- Глубокие тона: тёмно-синий, фиолетовый, изумрудный, бордовый
- Неоновые акценты: cyan, magenta, lime, orange
- Градиенты: сочетания вышеперечисленных цветов

---

### 2.3 Система табов

#### 2.3.1 Свойства таба
| Поле | Тип | Описание |
|------|-----|----------|
| id | string (uuid) | Уникальный идентификатор |
| name | string | Название таба |
| order | number | Порядок отображения |
| blocks | array | Массив блоков с позициями |

#### 2.3.2 Ограничения
- Максимум 8 табов
- Минимум 1 таб (последний нельзя удалить)

#### 2.3.3 Управление табами
- **Переключение:** клик по табу
- **Создание:** кнопка «+» (в режиме редактирования)
- **Удаление:** с подтверждением, если таб содержит закладки; удалённый таб и его содержимое попадают в корзину
- **Переименование:** через модальное окно (в режиме редактирования)
- **Переупорядочивание:** drag-n-drop табов

#### 2.3.4 Визуальное оформление
- Активный таб подсвечивается
- Неактивные табы приглушены
- Стилизация в геймерской эстетике (неоновые акценты)

---

### 2.4 Режимы работы

#### 2.4.1 Обычный режим
- Клик по блоку → открытие URL в новой вкладке браузера
- Переключение между табами
- Никакие изменения закладок недоступны

#### 2.4.2 Режим редактирования
Активируется кнопкой в интерфейсе. Доступные действия:

**Работа с блоками:**
- Клик по блоку/пустой ячейке → открытие модального окна создания/редактирования
- Перетаскивание блоков (drag-n-drop)
- Копирование: Ctrl + клик по блоку
- Вырезание: Shift + клик по блоку
- Вставка: Ctrl + клик по пустой ячейке
- Удаление через модальное окно редактирования

**Работа с табами:**
- Создание, удаление, переименование
- Перетаскивание для изменения порядка

**Дополнительные области:**
- Отображается буферная область
- Отображается иконка корзины

---

### 2.5 Перетаскивание блоков (Drag & Drop)

#### 2.5.1 Перетаскивание на пустую ячейку
Блок перемещается в целевую ячейку.

#### 2.5.2 Перетаскивание на занятую ячейку
Открывается контекстное меню с опциями:
- **Обменять** — блоки меняются местами (swap)
- **Убрать в буфер** — целевой блок перемещается в буферную область, перетаскиваемый занимает его место
- **Удалить** — целевой блок удаляется в корзину, перетаскиваемый занимает его место
- **Отмена** (Esc или клик вне меню) — операция отменяется, блок возвращается на исходную позицию

#### 2.5.3 Визуальная обратная связь
- Индикация допустимой зоны при перетаскивании
- Подсветка целевой ячейки
- Анимация перемещения

---

### 2.6 Буферная область

#### 2.6.1 Назначение
Временное хранилище блоков для:
- Переноса между табами
- Использования как «фабрики» для копирования
- Временного освобождения ячеек

#### 2.6.2 Характеристики
| Параметр | Значение |
|----------|----------|
| Расположение | Снизу от основной сетки |
| Видимость | Только в режиме редактирования |
| Размер | Динамически растёт по мере добавления блоков |
| Сохранение | Блоки сохраняются между сессиями |

#### 2.6.3 Операции
- Перетаскивание блока из сетки в буфер
- Перетаскивание блока из буфера в сетку
- Копирование/вырезание блоков в буфере (аналогично сетке)
- Удаление блока из буфера (в корзину)

---

### 2.7 Корзина

#### 2.7.1 Назначение
Хранение удалённых блоков и табов с возможностью восстановления.

#### 2.7.2 Характеристики
| Параметр | Значение |
|----------|----------|
| Расположение | Иконка рядом с буферной областью |
| Видимость | Только в режиме редактирования |
| Состояние по умолчанию | Свёрнута (только иконка) |
| Раскрытие | По клику на иконку |
| Лимит | Без ограничений |
| Сохранение | Между сессиями |

#### 2.7.3 Визуальное оформление
- Крупная, заметная иконка
- Индикатор количества элементов (бейдж)
- При раскрытии — список/сетка удалённых элементов

#### 2.7.4 Операции
- Перетаскивание элемента из корзины в сетку — восстановление
- Перетаскивание элемента из корзины в буфер — восстановление в буфер
- Очистка корзины — кнопка с подтверждением

---

### 2.8 Модальное окно создания/редактирования блока

#### 2.8.1 Поля формы
| Поле | Элемент управления | Валидация |
|------|-------------------|-----------|
| URL | Текстовое поле | Обязательное, валидный URL |
| Название | Текстовое поле | Обязательное, макс. 50 символов |
| Цвет | Палитра выбора | Обязательное |
| Иконка | Селектор иконок | Опциональное (отложено) |
| Выравнивание текста | Переключатель: верх/центр/низ | Обязательное, по умолчанию: центр |

#### 2.8.2 Действия
- **Сохранить** — применить изменения, закрыть окно
- **Удалить** — переместить блок в корзину, закрыть окно (только для существующих)
- **Отмена** — закрыть без сохранения

#### 2.8.3 Предпросмотр
В модальном окне отображается превью блока с применёнными настройками в реальном времени.

---

### 2.9 Хранение данных

#### 2.9.1 Структура данных в localStorage
```json
{
  "bookmarkDeck": {
    "version": "1.0",
    "tabs": [
      {
        "id": "uuid",
        "name": "Название таба",
        "order": 0,
        "blocks": [
          {
            "id": "uuid",
            "position": { "row": 0, "col": 0 },
            "url": "https://example.com",
            "title": "Example",
            "color": "gradient-cyan-purple",
            "icon": null,
            "textAlign": "center"
          }
        ]
      }
    ],
    "buffer": [],
    "trash": {
      "blocks": [],
      "tabs": []
    }
  }
}
```

#### 2.9.2 Экспорт/импорт
- **Экспорт:** скачивание JSON-файла со всеми данными
- **Импорт:** загрузка JSON-файла, валидация структуры, замена текущих данных
- Предупреждение при импорте о перезаписи текущих данных

#### 2.9.3 Сброс данных
- Кнопка «Сбросить всё»
- Модальное окно подтверждения с предупреждением
- Возврат к начальному состоянию (пустая сетка, один таб)

---

## 3. Нефункциональные требования

### 3.1 Дизайн

#### 3.1.1 Цветовая тема
Только тёмная тема.

#### 3.1.2 Стилистика
Геймерский стиль, вдохновлённый Stream Deck:
- Тёмный фон (почти чёрный или глубокий тёмно-серый)
- Неоновые акценты (cyan, magenta, фиолетовый)
- Эффекты свечения (glow) при наведении и активных состояниях
- Плавные анимации переходов
- Современные скруглённые углы

#### 3.1.3 Типографика
- Современный sans-serif шрифт
- Хорошая читаемость на тёмном фоне
- Контрастный текст на цветных блоках

### 3.2 Производительность
- Плавные анимации (60 fps)
- Мгновенный отклик на действия пользователя
- Эффективное использование localStorage (debounce при сохранении)

### 3.3 Доступность
- Фокусные состояния для навигации с клавиатуры
- Достаточный цветовой контраст текста
- Информативные title/aria-label для элементов управления

---

## 4. Пользовательские сценарии

### 4.1 Первый запуск
1. Пользователь открывает приложение
2. Отображается пустая сетка 8×4 с одним табом «Новый таб»
3. Все ячейки пустые (пунктирная рамка)

### 4.2 Добавление закладки
1. Пользователь нажимает кнопку «Режим редактирования»
2. Интерфейс переключается в режим редактирования
3. Пользователь кликает по пустой ячейке
4. Открывается модальное окно создания
5. Пользователь заполняет URL, название, выбирает цвет и выравнивание
6. Нажимает «Сохранить»
7. Блок появляется в выбранной ячейке
8. Пользователь выходит из режима редактирования

### 4.3 Переход по закладке
1. Пользователь кликает по блоку с закладкой (в обычном режиме)
2. Открывается новая вкладка браузера с указанным URL

### 4.4 Перенос закладки между табами
1. Пользователь входит в режим редактирования
2. Перетаскивает блок в буферную область
3. Переключается на другой таб
4. Перетаскивает блок из буфера в нужную ячейку

### 4.5 Восстановление удалённой закладки
1. Пользователь в режиме редактирования
2. Раскрывает корзину кликом по иконке
3. Находит нужный блок
4. Перетаскивает его в ячейку сетки или в буфер

### 4.6 Экспорт и импорт на другом устройстве
1. Пользователь открывает настройки
2. Нажимает «Экспорт»
3. Скачивается JSON-файл
4. На другом устройстве пользователь открывает приложение
5. Нажимает «Импорт», выбирает файл
6. Подтверждает перезапись данных
7. Все закладки восстановлены

---

## 5. Структура компонентов (рекомендуемая)

```
src/
├── components/
│   ├── layout/
│   │   ├── AppHeader.vue          # Заголовок, кнопка редактирования
│   │   └── AppFooter.vue          # Буфер и корзина (режим редактирования)
│   ├── tabs/
│   │   ├── TabBar.vue             # Панель табов
│   │   ├── TabItem.vue            # Отдельный таб
│   │   └── TabCreateButton.vue    # Кнопка создания таба
│   ├── grid/
│   │   ├── BookmarkGrid.vue       # Сетка 8×4
│   │   ├── BookmarkCell.vue       # Ячейка сетки
│   │   └── BookmarkBlock.vue      # Заполненный блок
│   ├── buffer/
│   │   ├── BufferArea.vue         # Буферная область
│   │   └── TrashBin.vue           # Корзина
│   ├── modals/
│   │   ├── BlockEditModal.vue     # Редактирование блока
│   │   ├── TabEditModal.vue       # Редактирование таба
│   │   ├── ConfirmModal.vue       # Универсальное подтверждение
│   │   └── ImportExportModal.vue  # Импорт/экспорт
│   ├── ui/
│   │   ├── ColorPalette.vue       # Выбор цвета
│   │   ├── IconSelector.vue       # Выбор иконки (отложено)
│   │   ├── ContextMenu.vue        # Контекстное меню
│   │   └── AlignmentPicker.vue    # Выбор выравнивания
│   └── common/
│       └── DraggableBlock.vue     # Обёртка для drag-n-drop
├── composables/
│   ├── useStorage.js              # Работа с localStorage
│   ├── useDragDrop.js             # Логика перетаскивания
│   ├── useClipboard.js            # Копировать/вырезать/вставить
│   └── useEditMode.js             # Управление режимом редактирования
├── stores/
│   └── bookmarkStore.js           # Pinia store для состояния
├── utils/
│   ├── validators.js              # Валидация данных
│   ├── exportImport.js            # Экспорт/импорт JSON
│   └── colors.js                  # Предустановленная палитра
└── App.vue
```

---

## 6. Этапы разработки (рекомендуемые)

### Этап 1: Базовая структура
- [ ] Настройка проекта (Vue 3, Tailwind CSS 4, Pinia)
- [ ] Базовый layout с тёмной темой
- [ ] Статическая сетка 8×4
- [ ] Компонент блока с базовым оформлением

### Этап 2: Данные и хранение
- [ ] Pinia store для управления состоянием
- [ ] Сохранение/загрузка из localStorage
- [ ] Экспорт/импорт JSON

### Этап 3: Система табов
- [ ] Панель табов с переключением
- [ ] Создание, удаление, переименование табов
- [ ] Drag-n-drop для переупорядочивания табов

### Этап 4: Редактирование блоков
- [ ] Режим редактирования
- [ ] Модальное окно создания/редактирования
- [ ] Палитра цветов
- [ ] Выравнивание текста

### Этап 5: Drag & Drop блоков
- [ ] Перетаскивание на пустые ячейки
- [ ] Контекстное меню при конфликте
- [ ] Визуальная обратная связь

### Этап 6: Буфер и корзина
- [ ] Буферная область
- [ ] Корзина с восстановлением
- [ ] Операции копировать/вырезать/вставить

### Этап 7: Полировка
- [ ] Геймерский стиль (свечение, анимации)
- [ ] Hover-эффекты
- [ ] Сброс данных
- [ ] Тестирование и баг-фиксы

---

## 7. Открытые вопросы и будущие улучшения

### 7.1 Отложено
- Набор векторных иконок для блоков
- Поиск по закладкам

### 7.2 Возможные улучшения
- Настраиваемый размер сетки
- Горячие клавиши для навигации
- Импорт закладок из браузера
- Синхронизация через облако
- Светлая тема
- Мобильная адаптация

---

## 8. Глоссарий

| Термин | Определение |
|--------|-------------|
| Блок | Визуальный элемент с закладкой в ячейке сетки |
| Таб | Страница с отдельной сеткой закладок |
| Буфер | Временное хранилище блоков вне основной сетки |
| Корзина | Хранилище удалённых элементов |
| Режим редактирования | Состояние интерфейса, позволяющее изменять закладки |
